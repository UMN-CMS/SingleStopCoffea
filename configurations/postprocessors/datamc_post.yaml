PostDefaults:
  style_set: "style.yaml"
  plot_configuration:
    cms_text: "Preliminary"
    image_type: ".pdf"
    cms_text_color: Black
  to_process:
    sample_spec:
      name:
        - 'qcd*'
        - 'data*'

catalog_path: "postprocessing/data_mc/catalog.json"
drop_sample_patterns:
  - "*50to80*"
  - "*80to120*"
  - "*120to170*"
  - "*170to300*"

  - "*50to100*"
  - "*100to200*"
  - "*200to300*"

Postprocessing:
  - name: Plots
    action: Histogram1D
    histogram_names:
      - HT
      - pt_1
      - pt_2
      - pt_3
      - eta_1
      - eta_2
      - eta_3
      - phi_1
      - phi_2
      - phi_3
      - m13_m
      - m14_m
      - m24_m
    scale: log
    output_name: "postprocessing/data_mc/plots/{dataset.era.name}/{region_name}/{dataset.name}/{histogram_name}"
    grouping:
      fields: ['dataset.name', 'dataset.era.name', 'region_name']
      axis_options: {variation: "central" }
  
  - name: Ratio
    action: RatioPlot
    scale: log
    match_fields: ["dataset.era.name", "region_name"]
    histogram_names:
      - HT
      - pt_1
      - pt_2
      - pt_3
      - eta_1
      - eta_2
      - eta_3
      - phi_1
      - phi_2
      - phi_3
      - m13_m
      - m14_m
      - m24_m
    ratio_ylim: [0,2]
    ratio_hlines: [1.0]
    output_name: "postprocessing/data_mc/plots/{dataset.era.name}/{region_name}/ratio/{histogram_name}"
    numerator:
      to_process:
        sample_name: qcd*
      fields: ['dataset.name', 'dataset.era.name', 'region_name']
      axis_options: {variation: central}
    denominator:
      fields: ['dataset.name', 'dataset.era.name', 'region_name']
      to_process:
        sample_name: data*
      axis_options: {variation: central}


  # - name: Doc
  #   action: DocRender
  #   catalog_paths: [postprocessing/data_mc/catalog.json]
  #   template: image_grid.tex
  #   doc_level_group: ["sector_group.parameters.dataset.era.name"]
  #   internal_group: ["sector_group.parameters.region_name"]
  #   output: 'postprocessing/{sector_group.parameters.dataset.era.name}.tex'
