PostDefaults:
  style_set: "default.yaml"
  plot_configuration:
    cms_text: "Preliminary"
    image_type: ".pdf"
    cms_text_color: white

all_oned: &all_oned
  #- h_njet
  #- HT
  #- pt_1
  #- eta_1
  #- phi_1
  #- pt_ht_ratio_1
  #- pt_2
  #- eta_2
  #- phi_2
  #- pt_ht_ratio_2
  #- pt_3
  #- eta_3
  #- phi_3
  #- pt_ht_ratio_3
  #- pt_4
  #- eta_4
  #- phi_4
  #- pt_ht_ratio_4
  #- jet_1_btag_deepflavb 
  #- jet_2_btag_deepflavb 
  #- jet_3_btag_deepflavb 
  #- jet_4_btag_deepflavb 
  - uncomp_0p67_mChi
  - comp_0p67_mChi
  - uncomp_0p67_mStop
  - comp_0p67_mStop
  #- m14_pt
  #- m14_eta
  #- m14_m
  #- m13_pt
  #- m13_eta
  #- m13_m
  #- m24_pt
  #- m24_eta
  #- m24_m
  #- L_bjet_pt
  #- L_nb
  #- L_b_0_pt
  #- L_b_1_pt
  #- L_bb_eta
  #- L_bb_phi
  #- L_bdr
  #- L_b_m
  #- L_b_pt
  #- M_bjet_pt
  #- M_nb
  #- M_b_0_pt
  #- M_b_1_pt
  #- M_bb_eta
  #- M_bb_phi
  #- M_bdr
  #- M_b_m
  #- M_b_pt
  #- T_bjet_pt
  #- T_nb
  #- T_b_0_pt
  #- T_b_1_pt
  #- T_bb_eta
  #- T_bb_phi
  #- T_bdr
  #- T_b_m
  #- T_b_pt



catalog_path: "postprocessing/qcd_signal/catalog.json"
drop_sample_patterns:
  - "*50to80*"
  - "*80to120*"
  - "*120to170*"
  - "*170to300*"

  - "*50to100*"
  - "*100to200*"
  - "*200to300*"

Postprocessing:
  #- name: Ratio
  #  action: RatioPlot
  #  scale: log
  #  match_fields: [dataset.era.name", "region_name"]
  #  histogram_names: *all_oned
  #    
  #  ratio_ylim: [0,2]
  #  ratio_hlines: [1.0]
  #  output_name: "postprocessing/data_mc/plots/{dataset.era.name}/{region_name}/ratio/{histogram_name}"
  #  denominator:
  #    to_process:
  #      sample_name: qcd*
  #    fields: ['dataset.name', 'dataset.era.name', 'region_name']
  #    axis_options: {variation: central, 'PassHLTHT': Sum, 'PassHLTSingleJet': Sum, 'PassOfflineHT': 1, 'PassOfflineSingleJet': 1}
  #  numerator:
  #    fields: ['dataset.name', 'dataset.era.name', 'region_name']
  #    to_process:
  #      sample_name: data*
  #    axis_options: {variation: central, 'PassHLTHT': Sum, 'PassHLTSingleJet': Sum, 'PassOfflineHT': 1, 'PassOfflineSingleJet': 1}
  #  normalize: true

  - name: Plot2D
    action: Histogram2D 
    histogram_names:  
      - comp_0p67_m14_vs_mChi
      - uncomp_0p67_m14_vs_mChi
      - comp_0p67_m14_vs_mChiRatio
      - uncomp_0p67_m14_vs_mChiRatio
    #- m13_vs_m14
    #- ratio_m13_vs_m14
    #- m24_vs_m14
    #- ratio_m24_vs_m14
    output_name: "postprocessing/qcd_signal/plots/{dataset.era.name}/{region_name}/{histogram_name}"
    to_process:
      sample_name:
        - '*'
      region_name: ['Signal312','Signal313'] 
    grouping:
      fields: ['dataset.name','dataset.era.name', 'region_name']
      axis_options: {variation: central, 'PassHLTHT': Sum, 'PassHLTSingleJet': Sum, 'PassOfflineHT': Sum, 'PassOfflineSingleJet': Sum}

  #- name: Added Plot2D
  #  action: Histogram2D 
  #  histogram_names:  
  #    - comp_0p67_m14_vs_mChi
  #    - uncomp_0p67_m14_vs_mChi
  #    - comp_0p67_m14_vs_mChiRatio
  #    - uncomp_0p67_m14_vs_mChiRatio
  #  #- m13_vs_m14
  #  #- ratio_m13_vs_m14
  #  #- m24_vs_m14
  #  #- ratio_m24_vs_m14
  #  output_name: "postprocessing/qcd_signal/plots/{region_name}/{histogram_name}"
  #  to_process:
  #    sample_name:
  #      - '*'
  #    region_name: ['Signal312','Signal313'] 
  #  grouping:
  #    fields: ['region_name']
  #    axis_options: {variation: central, 'PassHLTHT': Sum, 'PassHLTSingleJet': Sum, 'PassOfflineHT': Sum, 'PassOfflineSingleJet': Sum}
  #    add_together: true
  #- name: Added 2D Plots
  #  action: Histogram2D
  #  histogram_names:
  #    - uncomp_0p67_m14_vs_mChiRatio
  #    - comp_0p67_m14_vs_mChiRatio
  #    - uncomp_0p67_m14_vs_mChi
  #    - comp_0p67_m14_vs_mChi
  #  to_process:
  #    sample_name:
  #      - 'data*201*'
  #  grouping: 
  #    fields: ['region_name']
  #    axis_options: {variation: central, 'PassHLTHT': Sum, 'PassHLTSingleJet': Sum, 'PassOfflineHT': 1, 'PassOfflineSingleJet': 1}
  #    add_together: true
  #  output_name: "postprocessing/data_mc/plots/{region_name}/2d/qcd/{histogram_name}"
  #  plot_configuration:
  #    cms_text_color: white
#  - name: DataMCRatio2018
#    action: RatioPlot
#    scale: log
#    match_fields: ["region_name"]
#    histogram_names: *all_oned
#      
#    ratio_ylim: [0,2]
#    ratio_hlines: [1.0]
#    output_name: "postprocessing/data_mc/plots/datamc/{region_name}/ratio/{histogram_name}"
#    numerator:
#      title_format: "{dataset.era.name}"
#      to_process:
#        sample_name: 'data*'
#      fields: ['region_name']
#      axis_options: {variation: central}
#      style_set: 
#        - style: {}
#    denominator:
#      fields: ['region_name']
#      title_format: "{dataset.era.name}"
#      to_process:
#        sample_name: 'qcd*'
#      axis_options: {variation: central}
#      style_set: 
#        - style:
#            color: orange
#    normalize: true
#    plot_configuration:
#      lumi_text: ""



  # - name: Doc
  #   action: DocRender
  #   catalog_paths: [postprocessing/data_mc/catalog.json]
  #   template: image_grid.tex
  #   doc_level_group: ["sector_group.parameters.dataset.era.name"]
  #   internal_group: ["sector_group.parameters.region_name"]
  #   output: 'postprocessing/{sector_group.parameters.dataset.era.name}.tex'
