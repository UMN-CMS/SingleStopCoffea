PostDefaults:
  style_set: "style.yaml"
  plot_configuration:
    cms_text: "Preliminary"
    image_type: ".pdf"
    cms_text_color: Black
  to_process:
    sample_spec:
      name:
        - 'signal_2018_312_dijet_1000_100'
        - 'signal_2018_312_dijet_1200_400'
        - 'signal_2018_312_dijet_1500_400'
        - 'signal_2018_312_dijet_2000_400'

all_oned: &all_oned
  - dijet_mass
  - dijet_phi
  - dijet_eta
  - dijet_pt
  - dijet_delta_r
  - wide_jet1_pt
  - wide_jet2_pt
  - wide_jet1_eta
  - wide_jet2_eta
  - wide_jet1_phi
  - wide_jet2_phi
  - wide_jet1_mass
  - wide_jet2_mass


Postprocessing:
  - name: Simple 1D Plots
    action: Histogram1D
    histogram_names: *all_oned
    to_process:
      region_name: 'Signal'
      sample_spec:
        name:

    scale: log
    plot_configuration:
      cms_text: "Preliminary\n{region_name}"
    grouping: 
      fields: ['dataset.era.name', 'region_name']
      #axis_options: {variation: central, OneBTag: Sum, TwoBTag: Sum, OneMu: Sum}
      axis_options: {variation: central, OneBTag: Sum, TwoBTag: Sum}
    output_name: "postprocessing/dijet/plots/{region_name}/{histogram_name}"

  - name: Dump Yields
    action: DumpYields
    target_histogram: dijet_mass 

    grouping: 
      fields: ['dataset.era.name', 'region_name']
      axis_options: {variation: central}

    to_process:
      region_name: 'Signal'
      sample_spec:
    output_name: "postprocessing/dijet/yields/{dataset.era.name}_{region_name}_yield.csv"

  # 
  # - name: Simple 2D Plots
  #   action: Histogram2D
  #   histogram_names:
  #     - uncomp_0p67_m14_vs_mChiRatio
  #     - comp_0p67_m14_vs_mChiRatio
  #   to_process:
  #     sample_name: '*'
  #     region_name: '*'
  #   grouping: 
  #     fields: ['dataset.name', 'dataset.era.name', 'region_name']
  #     axis_options: {variation: central}
  #   output_name: "postprocessing/plots/{dataset.name}/{region_name}_{histogram_name}"
  #   plot_configuration:
  #     cms_text_color: white
  # # 
  # - name: Export
  #   action: ExportHists
  #   histogram_names:
  #     # - uncomp_0p67_m14_vs_mChiRatio
  #     # - comp_0p67_m14_vs_mChiRatio
  #     - h_njet
  #   to_process:
  #     sample_name: '*'
  #     region_name: '*'
  #   grouping: 
  #     fields: ['dataset.name', 'dataset.era.name', 'region_name']
  #     axis_options: {variation: central}
  #   output_name: "postprocessing/export_hists/{dataset.name}/{region_name}/{histogram_name}.pkl"
